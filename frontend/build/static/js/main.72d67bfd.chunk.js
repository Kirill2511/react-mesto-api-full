(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{30:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),c=a.n(s),i=a(19),o=a.n(i),r=a(8),l=(a(30),a(23)),u=a(5),p=a(2),d=a(3),j=a.p+"static/media/logo.a307e1c4.svg";var b=function(e){var t=e.loggingIn,a=e.userEmail,s=e.onSignOut;return Object(n.jsxs)("header",{className:"header",children:[Object(n.jsx)("img",{alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \xabMesto Russia\xbb",className:"header__logo",src:j}),Object(n.jsxs)("div",{className:"header__section",children:[t&&Object(n.jsxs)(d.b,{exact:!0,path:"/",children:[Object(n.jsx)("p",{className:"header__email",children:a}),Object(n.jsx)(r.b,{to:"/signin",className:"header__button-logout",onClick:s,children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(n.jsx)(d.b,{path:"/signin",children:Object(n.jsx)(r.b,{to:"/signup",className:"header__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(n.jsx)(d.b,{path:"/signup",children:Object(n.jsx)(r.b,{to:"/signin",className:"header__link",children:"\u0412\u0445\u043e\u0434"})})]})]})},m=c.a.createContext();var h=function(e){var t=c.a.useContext(m),a=e.card.owner===t._id,s="element__delete ".concat(a?"":"element__delete_invisible"),i=e.card.likes.some((function(e){return e===t._id})),o="element__heart ".concat(i?"element__heart_active":"");return Object(n.jsxs)("li",{className:"element",children:[Object(n.jsx)("button",{"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",className:s,name:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",type:"submit",onClick:function(){e.onCardDelete(e.card)}}),Object(n.jsx)("img",{src:e.card.link,alt:e.card.name,className:"element__image",onClick:function(){e.onCardClick(e.card)}}),Object(n.jsxs)("div",{className:"element__container",children:[Object(n.jsx)("h2",{className:"element__title",children:e.card.name}),Object(n.jsxs)("div",{className:"element__container_like",children:[Object(n.jsx)("button",{"aria-label":"\u041b\u0430\u0439\u043a",className:o,name:"\u041b\u0430\u0439\u043a",type:"submit",onClick:function(){e.onCardLike(e.card)}}),Object(n.jsx)("p",{className:"card__count-likes",children:e.card.likes.length})]})]})]})};var _=function(e){var t=c.a.useContext(m);return Object(n.jsxs)("main",{className:"content",children:[Object(n.jsxs)("section",{className:"profile",children:[Object(n.jsx)("button",{className:"button profile__edit-avatar",type:"button",onClick:e.onEditAvatar,children:Object(n.jsx)("img",{alt:"\u0436\u0430\u043a-\u0438\u0432",className:"profile__avatar",srcSet:t.avatar})}),Object(n.jsxs)("div",{className:"profile__info",children:[Object(n.jsxs)("div",{className:"profile__wrapper",children:[Object(n.jsx)("h1",{className:"profile__title",children:t.name}),Object(n.jsx)("button",{"aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",className:"profile__edit-button",type:"button",onClick:e.onEditProfile})]}),Object(n.jsx)("p",{className:"profile__subtitle",children:t.about})]}),Object(n.jsx)("button",{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",className:"profile__add-button",type:"button",onClick:e.onAddPlace})]}),Object(n.jsx)("section",{className:"elements",children:Object(n.jsx)("ul",{className:"elements__container",children:e.cards.map((function(t){return Object(n.jsx)(h,{card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})})]})};var f=function(){return Object(n.jsx)("footer",{className:"footer",children:Object(n.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})};var O=function(e){var t=e.card,a=e.onClose;return Object(n.jsx)("div",{className:"popup popup_card-image ".concat(t&&"popup_opened"),children:Object(n.jsxs)("div",{className:"popup__gallery",children:[Object(n.jsx)("img",{src:t&&t.link,alt:t&&t.name,className:"popup__image"}),Object(n.jsx)("h2",{className:"popup__card-about",children:t&&t.name}),Object(n.jsx)("button",{"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-icon",type:"button",onClick:a})]})})},g=a(21),x=a(22),v=new(function(){function e(t){Object(g.a)(this,e),this.url=t.url,this.headers=t.headers}return Object(x.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject(e.status)}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.url,"/cards"),{headers:this.getHeaders()}).then((function(t){return e._getResponseData(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.url,"/users/me"),{method:"GET",headers:this.getHeaders()}).then((function(t){return e._getResponseData(t)}))}},{key:"postNewCard",value:function(e){var t=this;return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this.getHeaders(),body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._getResponseData(e)}))}},{key:"setUserAvatar",value:function(e){var t=this;return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this.getHeaders(),body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this.getHeaders()}).then((function(e){return t._getResponseData(e)}))}},{key:"likeCard",value:function(e){var t=this;return fetch("".concat(this.url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this.getHeaders()}).then((function(e){return t._getResponseData(e)}))}},{key:"dislikeCard",value:function(e){var t=this;return fetch("".concat(this.url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this.getHeaders()}).then((function(e){return t._getResponseData(e)}))}},{key:"getHeaders",value:function(){var e=localStorage.getItem("jwt");return Object(u.a)(Object(u.a)({},this.headers),{},{Authorization:"Bearer ".concat(e)})}}]),e}())({url:"https://api.kirill251111.students.nomoredomains.work",headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8"}});var N=function(e){return Object(n.jsx)("div",{className:"popup popup__".concat(e.name," ").concat(e.isOpen?"popup_opened":""),children:Object(n.jsxs)("div",{className:"popup__container",children:[Object(n.jsx)("button",{"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-icon popup__close",type:"button",onClick:e.onClose}),Object(n.jsx)("h2",{className:"popup__title",children:e.title}),Object(n.jsx)("form",{className:"popup__fields popup__form-avatar",name:"".concat(e.name),onSubmit:e.onSubmit,action:"#",noValidate:!0,children:e.children})]})})};var k=function(e){return Object(n.jsx)("button",{type:"submit",className:"popup__button",children:e.onClick?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":e.button})};var C=function(e){var t=c.a.useRef("");return Object(n.jsxs)(N,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:e.isOpen,onClose:e.isClose,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})},children:[Object(n.jsxs)("label",{className:"popup__label",children:[Object(n.jsx)("input",{className:"popup__item popup__input_avatar-link",ref:t,id:"link-avatar",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,type:"url"}),Object(n.jsx)("span",{className:"popup__input-error",id:"link-avatar-error"})]}),Object(n.jsx)(k,{button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onClick:e.isLoading})]})};var y=function(e){var t=c.a.useState(""),a=Object(p.a)(t,2),s=a[0],i=a[1],o=c.a.useState(""),r=Object(p.a)(o,2),l=r[0],u=r[1],d=c.a.useContext(m);return c.a.useEffect((function(){i(d.name),u(d.about)}),[d.about,d.name]),Object(n.jsxs)(N,{name:"edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:e.isOpen,onClose:e.isClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:s,about:l})},children:[Object(n.jsxs)("label",{className:"popup__label",children:[Object(n.jsx)("input",{value:s||"",onChange:function(e){i(e.target.value)},className:"popup__item popup__name",id:"name-input",maxLength:"40",minLength:"2",name:"name",placeholder:"\u0418\u043c\u044f",required:!0,type:"text"}),Object(n.jsx)("span",{className:"popup__input-error",id:"name-input-error"})]}),Object(n.jsxs)("label",{className:"popup__label",children:[Object(n.jsx)("input",{value:l||"",onChange:function(e){u(e.target.value)},className:"popup__item popup__about",id:"activity-input",maxLength:"200",minLength:"2",name:"about",placeholder:"\u041e\u0431\u043e \u043c\u043d\u0435",required:!0,type:"text"}),Object(n.jsx)("span",{className:"popup__input-error",id:"activity-input-error"}),";"]}),Object(n.jsx)(k,{button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onClick:e.isLoading})]})};var S=function(e){return Object(n.jsx)(N,{name:"delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:e.isOpen,onClose:e.isClose,onSubmit:function(t){t.preventDefault(),e.onDelete(e.card)},children:Object(n.jsx)("button",{"aria-label":"\u0414\u0430",className:"popup__button popup__button_card-delete",name:"submit",type:"submit",children:e.isLoading?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430"})})};var w=function(e){var t=c.a.useState(""),a=Object(p.a)(t,2),s=a[0],i=a[1],o=c.a.useState(""),r=Object(p.a)(o,2),l=r[0],u=r[1];return Object(n.jsxs)(N,{name:"addCard",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:e.isOpen,onClose:e.isClose,onSubmit:function(t){t.preventDefault(),e.postNewCard({name:s,link:l})},children:[Object(n.jsxs)("label",{className:"popup__label",children:[Object(n.jsx)("input",{value:s||"",onChange:function(e){i(e.target.value)},id:"name",className:"popup__item popup__input-name",type:"text",name:"name",required:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"1",maxLength:"30",autoComplete:"off"}),Object(n.jsx)("span",{className:"popup__input-error",id:"place-input-error"})]}),Object(n.jsxs)("label",{className:"popup__label",children:[Object(n.jsx)("input",{value:l||"",onChange:function(e){u(e.target.value)},className:"popup__item popup__input-url",id:"link",type:"url",name:"link",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",autoComplete:"off"}),Object(n.jsx)("span",{className:"popup__input-error",id:"link-input-error"})]}),Object(n.jsx)(k,{button:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",onClick:e.isLoading})]})},L=a(11);var E=function(e){var t=e.onLogin,a=c.a.useState({email:"",password:""}),s=Object(p.a)(a,2),i=s[0],o=s[1],l=function(e){var t=e.target,a=t.name,n=t.value;o(Object(u.a)(Object(u.a)({},i),{},Object(L.a)({},a,n)))};return Object(n.jsx)("section",{className:"auth",children:Object(n.jsxs)("div",{className:"auth-container",children:[Object(n.jsx)("h3",{className:"auth__title",children:"\u0412\u0445\u043e\u0434"}),Object(n.jsxs)("form",{className:"auth__form",onSubmit:function(e){e.preventDefault();var a=i.email,n=i.password;t(a,n)},children:[Object(n.jsx)("input",{onChange:l,className:"auth__input",id:"email",name:"email",placeholder:"Email",autoComplete:"off",value:i.email}),Object(n.jsx)("input",{onChange:l,className:"auth__input",id:"password",name:"password",placeholder:"Password",type:"password",value:i.password}),Object(n.jsx)("button",{className:"auth__button-submit",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsx)("div",{className:"auth__container-register",children:Object(n.jsxs)("p",{className:"auth__register",children:["\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(n.jsx)(r.b,{to:"/signup",className:"auth__link",children:"\xa0\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})})]})]})})};var D=function(e){var t=e.onRegister,a=c.a.useState({email:"",password:""}),s=Object(p.a)(a,2),i=s[0],o=s[1],l=function(e){var t=e.target,a=t.name,n=t.value;o(Object(u.a)(Object(u.a)({},i),{},Object(L.a)({},a,n)))};return Object(n.jsx)("section",{className:"auth",children:Object(n.jsxs)("div",{className:"auth__container",children:[Object(n.jsx)("h3",{className:"auth__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(n.jsxs)("form",{className:"auth__form",onSubmit:function(e){e.preventDefault();var a=i.email,n=i.password;t(a,n)},children:[Object(n.jsx)("input",{onChange:l,className:"auth__input",id:"email",name:"email",placeholder:"Email",autoComplete:"off",value:i.email}),Object(n.jsx)("input",{className:"auth__input",onChange:l,id:"password",name:"password",placeholder:"Password",type:"password",value:i.password}),Object(n.jsx)("button",{className:"auth__button-submit",type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(n.jsx)("div",{className:"auth__container-register",children:Object(n.jsxs)("p",{className:"auth__register",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(n.jsx)(r.b,{to:"/signin",className:"auth__link",children:"\xa0\u0412\u043e\u0439\u0442\u0438"})]})})]})]})})};var I=function(e){var t=e.onClose,a=e.isOpen,s=e.image,c=e.message;return Object(n.jsx)("section",{className:"popup popup__tooltip ".concat(a&&"popup_opened"),children:Object(n.jsxs)("div",{className:"popup__container",children:[Object(n.jsx)("img",{className:"popup__tooltip",src:s,alt:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(n.jsx)("h2",{className:"popup__tooltip-message",children:c}),Object(n.jsx)("button",{"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-icon",type:"button",onClick:t})]})})},P="https://api.kirill251111.students.nomoredomains.work",A=function(e){return e.ok?e.json():Promise.reject(e.status)},T=a(24),R=function(e){var t=e.loggingIn,a=Object(T.a)(e,["loggingIn"]);return Object(n.jsx)(d.b,{children:function(){return t?Object(n.jsx)(d.b,Object(u.a)({},a)):Object(n.jsx)(d.a,{to:"/signin"})}})},U=function(){return Object(n.jsx)("div",{className:"page",children:Object(n.jsxs)("section",{className:"not-found",children:[Object(n.jsx)("h3",{className:"not-found__title",children:"\u041e\u0448\u0438\u0431\u043a\u0430 404"}),Object(n.jsx)("p",{className:"not-found__subtitle",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]})})},H=a.p+"static/media/authSuccess.1b6082f8.svg",J=a.p+"static/media/authError.df8eddf6.svg";var q=function(){var e=c.a.useState(!1),t=Object(p.a)(e,2),a=t[0],s=t[1],i=c.a.useState(!1),o=Object(p.a)(i,2),r=o[0],j=o[1],h=c.a.useState(!1),g=Object(p.a)(h,2),x=g[0],N=g[1],k=c.a.useState(!1),L=Object(p.a)(k,2),T=L[0],q=L[1],B=c.a.useState(null),F=Object(p.a)(B,2),M=F[0],z=F[1],G=c.a.useState(!1),V=Object(p.a)(G,2),K=V[0],Q=V[1],W=c.a.useState(null),X=Object(p.a)(W,2),Y=X[0],Z=X[1],$=c.a.useState(!1),ee=Object(p.a)($,2),te=ee[0],ae=ee[1],ne=c.a.useState({}),se=Object(p.a)(ne,2),ce=se[0],ie=se[1],oe=c.a.useState([]),re=Object(p.a)(oe,2),le=re[0],ue=re[1],pe=c.a.useState(!1),de=Object(p.a)(pe,2),je=de[0],be=de[1],me=c.a.useState(""),he=Object(p.a)(me,2),_e=he[0],fe=he[1],Oe=c.a.useState(!1),ge=Object(p.a)(Oe,2),xe=ge[0],ve=ge[1],Ne=c.a.useState(""),ke=Object(p.a)(Ne,2),Ce=ke[0],ye=ke[1],Se=c.a.useState(""),we=Object(p.a)(Se,2),Le=we[0],Ee=we[1],De=Object(d.g)();function Ie(){var e,t=localStorage.getItem("jwt");t&&(be(!0),(e=t,fetch("".concat(P,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(A)).then((function(e){e&&(fe(e.data.email),De.push("/"))})).catch((function(e){400===e&&console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043d\u0435 \u0432\u0435\u0440\u0435\u043d"),401===e&&console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d"),be(!1)})))}function Pe(){j(!1),N(!1),q(!1),ae(!1),Q(!1),Z(null),z(null),ve(!1)}function Ae(e){"Escape"===e.key&&Pe()}function Te(e){e.target.classList.contains("popup")&&Pe()}return c.a.useEffect((function(){Ie()}),[]),c.a.useEffect((function(){return document.addEventListener("keydown",Ae),document.addEventListener("click",Te),function(){document.removeEventListener("keydown",Ae),document.removeEventListener("click",Te)}}),[]),c.a.useEffect((function(){Promise.all([v.getInitialCards(),v.getUserInfo()]).then((function(e){var t=Object(p.a)(e,2),a=t[0],n=t[1].data;ie({_id:n._id,name:n.name,about:n.about,avatar:n.avatar}),ue(a.map((function(e){return{name:e.name,link:e.link,likes:e.likes,owner:e.owner,id:e._id}})))})).catch((function(e){return console.log(e)}))}),[]),Object(n.jsx)(m.Provider,{value:ce,children:Object(n.jsxs)("div",{className:"page",children:[Object(n.jsx)(b,{loggingIn:je,userEmail:_e,onSignOut:function(){localStorage.removeItem("jwt"),be(!1),fe(""),De.push("/signin")}}),Object(n.jsxs)(d.d,{children:[Object(n.jsx)(R,{exact:!0,path:"/",loggingIn:je,children:Object(n.jsx)(_,{cards:le,onEditAvatar:function(){N(!0)},onEditProfile:function(){j(!0)},onAddPlace:function(){q(!0)},onCardClick:function(e){ae(!0),Z(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e===ce._id})),a=t?"\u0443\u0434\u0430\u043b\u0438\u0442\u044c":"\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c";(t?function(e){return v.dislikeCard(e)}:function(e){return v.likeCard(e)})(e.id).then((function(t){var a=t.data,n={name:a.name,link:a.link,likes:a.likes,owner:a.owner,id:a._id},s=le.map((function(t){return t.id===e.id?n:t}));ue(s)})).catch((function(e){console.log("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e ".concat(a," \u043b\u0430\u0439\u043a. \u041e\u0448\u0438\u0431\u043a\u0430 ").concat(e,"."))}))},onCardDelete:function(e){Q(!0),z(e)}})}),Object(n.jsx)(d.b,{path:"/signin",children:Object(n.jsx)(E,{onLogin:function(e,t){(function(e,t){return fetch("".concat(P,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(A)})(e,t).then((function(t){t.token&&(localStorage.setItem("jwt",t.token),be(!0),fe(e),De.push("/"))})).catch((function(e){ve(!0),ye(J),Ee("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),"\u041e\u0448\u0438\u0431\u043a\u0430: 400"===e?console.log("\u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"):"\u041e\u0448\u0438\u0431\u043a\u0430: 401"===e&&console.log("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0434\u0430\u043d\u043d\u044b\u043c email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")}))}})}),Object(n.jsx)(d.b,{path:"/signup",children:Object(n.jsx)(D,{onRegister:function(e,t){(function(e,t){return fetch("".concat(P,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(A)})(e,t).then((function(e){e.data.email&&(ve(!0),ye(H),be(!0),Ee("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),De.push("/signin"))})).catch((function(e){ve(!0),ye(J),Ee("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),"\u041e\u0448\u0438\u0431\u043a\u0430: 400"===e&&console.log("\u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435")}))}})}),Object(n.jsx)(d.b,{exact:!0,path:"/",children:je?Object(n.jsx)(d.a,{to:"/"}):Object(n.jsx)(d.a,{to:"/signin"})}),Object(n.jsx)(d.b,{path:"*",children:Object(n.jsx)(U,{})})]}),je&&Object(n.jsx)(f,{}),Object(n.jsx)(C,{isOpen:x,isClose:Pe,onUpdateAvatar:function(e){s(!0),v.setUserAvatar(e).then((function(e){var t=e.data;ie(Object(u.a)(Object(u.a)({},ce),{},{avatar:t.avatar})),Pe()})).catch((function(e){console.log(e)})).finally((function(){s(!1)}))},isLoading:a}),Object(n.jsx)(y,{isOpen:r,isClose:Pe,onUpdateUser:function(e){s(!0),v.setUserInfo(e).then((function(e){var t=e.data;ie(Object(u.a)(Object(u.a)({},ce),{},{name:t.name,about:t.about})),Pe()})).catch((function(e){console.log(e)})).finally((function(){s(!1)}))},isLoading:a}),Object(n.jsx)(w,{isOpen:T,isClose:Pe,postNewCard:function(e){s(!0),v.postNewCard({name:e.name,link:e.link}).then((function(e){var t=e.data,a={name:t.name,link:t.link,likes:t.likes,owner:t.owner,id:t._id};ue([a].concat(Object(l.a)(le))),Pe()})).catch((function(e){console.log(e)})).finally((function(){s(!1)}))},isLoading:a}),Object(n.jsx)(S,{isOpen:K,isClose:Pe,onDelete:function(e){s(!0),v.deleteCard(e.id).then((function(){var t=le.filter((function(t){return t.id!==e.id}));ue(t),console.log("\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 ".concat(e.id," \u0443\u0434\u0430\u043b\u0435\u043d\u0430.")),Pe()})).catch((function(e){console.log("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443. \u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e,"."))})).finally((function(){s(!1)}))},card:M,isLoading:a}),Object(n.jsx)(O,{isOpen:te,onClose:Pe,card:Y}),Object(n.jsx)(I,{isOpen:xe,onClose:Pe,image:Ce,message:Le,loggingIn:je})]})})},B=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,40)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(r.a,{children:Object(n.jsx)(q,{})})}),document.getElementById("root")),B()}},[[39,1,2]]]);
//# sourceMappingURL=main.72d67bfd.chunk.js.map